<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Study Planner</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f9f9f9;
      color: #000;
      transition: background 0.3s, color 0.3s;
    }
    header {
      background: #4CAF50;
      color: white;
      text-align: center;
      padding: 1rem;
      position: relative;
    }
    nav {
      background: #333;
      color: white;
      padding: 0.5rem;
      text-align: center;
    }
    nav a {
      color: white;
      margin: 0 10px;
      text-decoration: none;
    }
    section {
      padding: 20px;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      background: white;
      margin: 5px 0;
      padding: 10px;
      border-radius: 5px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }
    li.done {
      text-decoration: line-through;
      color: gray;
    }
    button {
      margin-left: 5px;
      padding: 5px 10px;
      cursor: pointer;
    }
    .progress-bar {
      width: 100%;
      background: #ddd;
      border-radius: 5px;
      overflow: hidden;
      margin: 10px 0;
    }
    .progress-fill {
      background: #4CAF50;
      height: 20px;
      width: 0%;
      text-align: center;
      color: white;
      line-height: 20px;
    }
    footer {
      background: #333;
      color: white;
      text-align: center;
      padding: 1rem;
      margin-top: 20px;
    }

    /* üåô Dark Mode Styles */
    body.dark {
      background: #181818;
      color: #f1f1f1;
    }
    body.dark li {
      background: #222;
      color: #ddd;
    }
    body.dark nav {
      background: #111;
    }
    body.dark footer {
      background: #111;
    }
    #darkToggle {
      position: absolute;
      right: 10px;
      top: 10px;
      padding: 5px 10px;
      cursor: pointer;
      background: #fff;
      color: #333;
      border-radius: 5px;
      border: none;
    }
    body.dark #darkToggle {
      background: #333;
      color: #fff;
    }
  </style>
</head>
<body>

  <header>
    <h1>üìö Study Planner</h1>
    <button id="darkToggle" onclick="toggleDarkMode()">üåô Dark Mode</button>
  </header>

  <nav>
    <a href="#plan">Study Plan</a>
    <a href="#timer">Pomodoro</a>
    <a href="#tracker">Progress</a>
  </nav>

  <!-- Study Plan Section -->
  <section id="plan">
    <h2>üìñ Study Plan</h2>
    <input type="text" id="subject" placeholder="Enter subject">
    <input type="number" id="hours" placeholder="Hours">
    <button onclick="addPlan()">‚ûï Add</button>
    <ul id="planList"></ul>
  </section>

  <!-- Pomodoro Timer -->
  <section id="timer">
    <h2>‚è≥ Pomodoro Timer</h2>
    <p id="time">25:00</p>
    <button onclick="startTimer()">‚ñ∂Ô∏è Start</button>
    <button onclick="pauseTimer()">‚è∏ Pause</button>
    <button onclick="resetTimer()">üîÑ Reset</button>
  </section>

  <!-- Progress Tracker -->
  <section id="tracker">
    <h2>üìä Progress Tracker</h2>
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill">0%</div>
    </div>
    <p id="progressText">Completed 0/0 tasks</p>
    <p id="streakText">üî• Streak: 0 days</p>
    <button onclick="exportReport()">üì§ Export Report</button>
  </section>

  <footer>
    <p>¬© 2025 Study Planner</p>
  </footer>

  <script>
    let totalTasks = 0;
    let completedTasks = 0;
    let streak = parseInt(localStorage.getItem("streak")) || 0;
    let lastDate = localStorage.getItem("lastDate") || "";

    // --- Handle Streak ---
    function updateStreak() {
      let today = new Date().toDateString();
      if (lastDate !== today) {
        if (lastDate === new Date(Date.now() - 86400000).toDateString()) {
          streak++;
        } else {
          streak = 1;
        }
        lastDate = today;
        localStorage.setItem("lastDate", today);
        localStorage.setItem("streak", streak);
      }
      document.getElementById("streakText").textContent = `üî• Streak: ${streak} days`;
    }

    // --- Save & Load Data ---
    function saveData() {
      let data = {
        tasks: [],
        completed: completedTasks,
        total: totalTasks,
        streak: streak,
        lastDate: lastDate
      };
      document.querySelectorAll("#planList li").forEach(li => {
        data.tasks.push({
          subject: li.dataset.subject,
          hours: li.dataset.hours,
          done: li.classList.contains("done")
        });
      });
      localStorage.setItem("studyPlanner", JSON.stringify(data));
    }

    function loadData() {
      let saved = localStorage.getItem("studyPlanner");
      if (saved) {
        let data = JSON.parse(saved);
        totalTasks = data.total;
        completedTasks = data.completed;
        streak = data.streak;
        lastDate = data.lastDate || "";
        document.getElementById("streakText").textContent = `üî• Streak: ${streak} days`;
        data.tasks.forEach(t => {
          renderPlan(t.subject, t.hours, t.done);
        });
        updateProgress();
      }
      updateStreak();
    }

    // --- Add Plan ---
    function addPlan() {
      let subject = document.getElementById("subject").value;
      let hours = document.getElementById("hours").value;
      if (subject && hours) {
        totalTasks++;
        renderPlan(subject, hours, false);
        updateProgress();
        saveData();
        document.getElementById("subject").value = "";
        document.getElementById("hours").value = "";
      }
    }

    // --- Render Plan with Edit & Delete ---
    function renderPlan(subject, hours, done) {
      let li = document.createElement("li");
      li.textContent = `üìñ ${subject} - ${hours} hrs `;
      li.dataset.subject = subject;
      li.dataset.hours = hours;

      // ‚úÖ Complete Button
      let completeBtn = document.createElement("button");
      completeBtn.textContent = "Complete ‚úÖ";
      completeBtn.onclick = function() {
        if (!li.classList.contains("done")) {
          li.classList.add("done");
          completedTasks++;
          updateProgress();
          saveData();
        }
      };

      // ‚úèÔ∏è Edit Button
      let editBtn = document.createElement("button");
      editBtn.textContent = "‚úèÔ∏è Edit";
      editBtn.onclick = function() {
        let newSubject = prompt("Enter new subject:", li.dataset.subject);
        let newHours = prompt("Enter new hours:", li.dataset.hours);
        if (newSubject && newHours) {
          li.firstChild.textContent = `üìñ ${newSubject} - ${newHours} hrs `;
          li.dataset.subject = newSubject;
          li.dataset.hours = newHours;
          saveData();
        }
      };

      // ‚ùå Delete Button
      let deleteBtn = document.createElement("button");
      deleteBtn.textContent = "‚ùå Delete";
      deleteBtn.onclick = function() {
        if (li.classList.contains("done")) {
          completedTasks--;
        }
        totalTasks--;
        li.remove();
        updateProgress();
        saveData();
      };

      if (done) {
        li.classList.add("done");
      }

      li.appendChild(completeBtn);
      li.appendChild(editBtn);
      li.appendChild(deleteBtn);

      document.getElementById("planList").appendChild(li);
    }

    // --- Progress Update ---
    function updateProgress() {
      let percent = (completedTasks / totalTasks) * 100 || 0;
      document.getElementById("progressFill").style.width = percent + "%";
      document.getElementById("progressFill").textContent = Math.round(percent) + "%";
      document.getElementById("progressText").textContent = `Completed ${completedTasks}/${totalTasks} tasks`;
    }

    // --- Export Report ---
    function exportReport() {
      let report = "üìö Study Report\n\n";
      let tasks = document.querySelectorAll("#planList li");
      tasks.forEach((task, index) => {
        let subject = task.dataset.subject;
        let hours = task.dataset.hours;
        let status = task.classList.contains("done") ? "‚úÖ Completed" : "‚ùå Pending";
        report += `${index + 1}. ${subject} - ${hours} hrs - ${status}\n`;
      });
      report += `\nTotal Tasks: ${totalTasks}`;
      report += `\nCompleted: ${completedTasks}`;
      report += `\nProgress: ${((completedTasks / totalTasks) * 100 || 0).toFixed(2)}%`;
      report += `\nCurrent Streak: ${streak} days\n`;

      let blob = new Blob([report], { type: "text/plain" });
      let link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "Study_Report.txt";
      link.click();
    }

    // --- Pomodoro Timer ---
    let timeLeft = 25 * 60;
    let timer;
    function updateTimerDisplay() {
      let minutes = Math.floor(timeLeft / 60);
      let seconds = timeLeft % 60;
      document.getElementById("time").textContent =
        `${minutes}:${seconds < 10 ? "0" : ""}${seconds}`;
    }
    function startTimer() {
      if (!timer) {
        timer = setInterval(() => {
          if (timeLeft > 0) {
            timeLeft--;
            updateTimerDisplay();
          } else {
            clearInterval(timer);
            timer = null;
            alert("‚è∞ Time's up! Take a break!");
          }
        }, 1000);
      }
    }
    function pauseTimer() {
      clearInterval(timer);
      timer = null;
    }
    function resetTimer() {
      clearInterval(timer);
      timer = null;
      timeLeft = 25 * 60;
      updateTimerDisplay();
    }

    // --- Dark Mode Toggle ---
    function toggleDarkMode() {
      document.body.classList.toggle("dark");
      let mode = document.body.classList.contains("dark") ? "dark" : "light";
      localStorage.setItem("theme", mode);
      document.getElementById("darkToggle").textContent =
        mode === "dark" ? "‚òÄÔ∏è Light Mode" : "üåô Dark Mode";
    }

    // --- Initialize ---
    updateTimerDisplay();
    loadData();

    // Apply saved theme
    let savedTheme = localStorage.getItem("theme");
    if (savedTheme === "dark") {
      document.body.classList.add("dark");
      document.getElementById("darkToggle").textContent = "‚òÄÔ∏è Light Mode";
    }
  </script>
</body>
</html>



